# 배열 (Array)

2022.07.05

예전에 공부했던 것을 다시 한번 꺼내보겠습니다. 프로그래밍을 함에 있어 가장 중요한 변수가 뭐였나요? 변수는 단 하나의 값을 저장하기 위한 메모리 공간이었습니다. 프로그래밍을 한다는 것은 우리에게 주어진 문제 상황에 알맞은 적절한 변수를 설정하고, 변수들에 적절한 연산을 가하여 최종적으로 해당 문제에 적합한 변수의 값을 얻는 것과 마찬가지라고 변수를 공부하면서 말했었습니다.

하지만 프로그래밍을 하면서 사용하는 변수는 1, 2개가 아닙니다. 정말 간단한 프로그램을 짜는데도 수십 개의 변수가 필요할 수 있으며, 우리가 사용하고 있는 이 운영체제의 변수는 말할 것도 없이 어마어마하게 많겠죠. 이들을 일일히 선언해주고 초기화하여 사용한다면 관리가 무진장 어려워질 것이라 생각합니다. 이를 조금이나마 해결해주는 것이 바로 **배열(Array)**입니다. 이번 시간에는 배열에 대하여 알아보겠습니다.

## 배열

배열의 정의는 다음과 같습니다.

<aside>
💡 ***배열은 같은 타입의 여러 변수를 하나의 묶음으로 다루는 것.***

</aside>

간단한 예시를 한번 보겠습니다. 학생 5명의 시험 점수를 입력 받아 그 평균을 구하고 싶다고 생각해봅시다. 만약 배열을 사용하지 않는다면 다음과 같이 코드를 작성할 것입니다. 

```java
class calcScoreAvg {
	public static void main(String[] args) {
		int score1, ... , score5;    // 5개의 시험 점수를 담을 변수 선언하고 입력받았다 가정
		int avg = (score1 + score2 + score3 + score4 + score5) / 5;
		System.out.println(avg);
	}
}
```

일단 (제가 보기에) 변수에 숫자가 들어가는 것은 보기에 그리 좋지 못하다고 생각합니다. 그리고 결정적으로 위의 코드는 확장성이 떨어집니다. 만약에 학생 5명의 시험 점수가 아니라 학생 100명의 시험 점수를 입력 받아야 한다면 위의 방법으로는 답이 없습니다. 너무 비효율적인 코드가 등장할 것입니다. 이때, 각 시험 점수를 변수가 아닌 배열에 저장한다면 코드는 훨씬 깔끔해집니다. 

```java
class calcScoreAvg {
	public static void main(String[] args) {
		int[] score = new int[5];     // 시험 점수를 저장할 배열을 선언하고 값들이 저장되었다 가정
		
		int avg = 0;
		for (int i = 0; i < score.length; i++) {
			avg += score[i];
		}
		avg /= score.length;

		System.out.println(avg);
	}
}
```

추가적인 변수 선언 없이 배열의 크기만 조정하여 추가적으로 값들을 입력받으면 더 많은 학생들의 시험 점수에 대해서도 평균을 쉽게 구할 수 있습니다. 그러면 배열을 왜 사용하는지에 대하여 간단히 알아보았으니 이번에는 자바에서 배열을 사용하는 방법에 대하여 알아보겠습니다. 

### 배열의 선언, 생성, 초기화, 길이

여타 변수와 동일하게 배열을 사용하려면 배열을 선언해주어야 합니다. 변수를 공부할때 알아봤듯이 기본형 이외의 변수들은 모두 참조형 변수입니다. 따라서 배열을 사용하기 위해 사용하는 변수 또한 참조 변수입니다. 

```java
int[] score;   // '타입[] 배열'의 형식으로 선언
```

한 가지 주의해야할 점은 **배열은 선언한다는 것은 배열을 다루기 위한 참조 변수를 위한 공간만이 생성**되는 과정이고 실제로 배열을 사용하기 위해서는 **배열을 생성**해주어야 합니다. 이를 가능하게 해주는 것이 ‘new’ 연산자입니다.

```jsx
int[] score;
score = new int[5];
```

‘new’ 연산자를 통해서 5개의 int형 데이터를 저장할 공간이 생성되고, 그 배열의 주소가 참조 변수 score에 담깁니다.

**배열을 초기화** 하는데에는 두가지 방법이 있습니다. 첫째는 각 원소에 인덱스로 접근하여 일일히 초기화를 하는 것입니다. 배열은 생성되면 기본적으로 해당 타입의 초기값으로 초기화가 되기 때문에 우리가 원하는 부분만 초기화를 할 수 있다는 장점이 있습니다. 두번째는 배열 전체를 초기화하는 것입니다. 이 경우는 더 간단하게 초기화를 할 수 있지만 초기화를 해야하는 원소의 개수가 많아질 경우 코드를 작성하기 힘들어집니다.

```java
// 방법 1. 인덱스로 접근하여 배열 초기화 
score[0] = 20;
...
score[4] = 60;

// 방법 2. 배열 전체 초기화
score = {20, 30, 40, 50, 60};
```

마지막으로 배열의 길이는 `배열.length` 로 구할 수 있습니다. 배열의 길이를 따로 변수에 담지 않아도 참조 변수를 통해서 배열의 길이를 구할 수 있기 때문에 코드의 확장성이 더 증가합니다.

```java
int len = score.length;    // 5
```

### 배열의 복사

배열은 한번 생성하면 값을 저장할 공간이 정해지기 때문에 추후에 배열의 길이를 바꿀 수 없습니다. 만약에 배열의 길이를 늘려야한다면, 즉 더 많은 값들을 저장해야한다면 기존의 배열을 더 큰 배열로 옮겨야합니다. 이를 옮기는 방법인 배열을 복사하는 방법에 대하여 알아보겠습니다.

배열을 복사하는 방법에는 두 가지가 있습니다. 첫 번째는 더 큰 배열을 선언, 생성해두고 `for문`을 이용하여 하나씩 복사하는 방법입니다.

```java
// 10명의 점수를 저장해야한다고 하면
int[] scoreLenOfTen = new int[10];
for (int i = 0; i < score.length; i++) {
	scoreLenOfTen[i] = score[i];
}
```

두 번째로는 `System 클래스`의 `arraycopy()` 메서드를 사용하는 것입니다. 

```java
// score 배열의 0번째 원소부터 score.length 개수만큼
// scoreLenOfTen 배열에 0번부터 복사
System.arraycopy(score, 0, scoreLenOfTen, 0, score.length); 
```

`for문`으로 복사를 하는 방법은 배열의 원소에 일일히 접근을 하여 복사를 하는 방법이고 `arraycopy()`는 배열을 한번에 통째로 복사하는 방법입니다. 따라서 **배열을 복사하는 것은 `for문`을 이용하는 것보다 `arraycopy()`를 이용하는 것이 더 효율적입니다.** 

## 문자열 배열

문자열에 대하여 조금 더 살펴보겠습니다. 기본형 중에 문자열을 저장하는 자료형에는 `char` 자료형이 있었습니다. 이 `char` 자료형은 하나의 문자만 저장이 가능했죠. 그리고 예전에 `char` 자료형을 공부하면서 우리가 흔히 아는 여러 개의 문자로 구성된 문자열은 `String` 클래스를 이용하여 저장한다고 간단하게 언급했었던 적이 있습니다. 

근데 생각해보면 `char` 자료형이 단 하나의 문자만을 저장한다면 `char` 배열은 여러 개의 문자를 저장할 수 있지 않을까요? `char` 배열을 이용하면 여러 개의 문자로 구성된 문자열을 저장할 수 있을 것 같은데 왜 `String` 클래스를 이용하는 것일까요?

```java
// "hello"를 각각 char[]과 String 클래스에 저장하는 방법
char[] hello = new char[5] {'h', 'e', 'l', 'l', 'o'};
String hello = "hello";
```

맞습니다. `String` 클래스도 내부적으로는 `char` 배열을 이용하여 문자열을 저장합니다. 다만, 자바는 객체지향언어이고, 문자열을 사용하는 다양한 기능들이 있기 때문에 이를 묶어서 `String` 클래스로 정의한 것입니다. 즉, `String` 클래스는 `char` 배열에 기능(메서드)을 추가한 것입니다. 그래서 `String` 클래스와 `char` 배열 간 변환이 자유롭습니다.

```java
char[] helloCharArr = hello.toCharArray();   // String -> char[]
String helloStr = new String(hello);         // char[] -> String
```

C에서는 문자열을 `char` 배열로 다룹니다. 잠깐 C를 공부했었던 사람으로써 이 문자열을 다루는 것이 굉장히 까다로웠습니다. 미리 메모리 공간도 확보해주어야 하고, 문자열의 길이를 짐작하여 충분한 공간을 확보해주어야 하고, 생각보다 신경써야 할 것이 굉장히 많았습니다. 자바는 이러한 기능들을 `String` 클래스로 묶어서 사용자가 직관적으로 문자열을 사용할 수 있도록 해주는 것 같습니다. 개인적으로 자바에서 굉장히 편한 부분이라 생각합니다. 

문자열에 관한 더 자세한 부분은 이후에 9장 문자열을 다룰 때 더 자세하게 보도록 하겠습니다.